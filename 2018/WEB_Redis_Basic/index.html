<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="https://coldinfire.github.io/2018/Utils_hugo1/" />
  <link rel="next" href="https://coldinfire.github.io/2018/Utils_hugo2/" />
  <link rel="canonical" href="https://coldinfire.github.io/2018/WEB_Redis_Basic/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
            Redis 基本使用  | Small Fire`s Blog
       
  </title>
  <meta name="title" content=" Redis 基本使用  | Small Fire`s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=" Redis 基本使用 "/>
<meta name="twitter:description" content="Redis 简介 redis 时一款高性能的非关系型数据库(NOSQL)，包含多种数据结构、支持网络、可选持久性的键值对存储数据库。 数据的存储格式是key,val"/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": " Redis 基本使用 ",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/coldinfire.github.io\/2018\/WEB_Redis_Basic\/"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https:\/\/coldinfire.github.io\/cover.png",
    "width":  800 ,
    "height":  600 
  },
  "genre": "posts",
  "keywords": "Redis",
  "wordcount":  1360 ,
  "url": "https:\/\/coldinfire.github.io\/2018\/WEB_Redis_Basic\/",
  "datePublished": "2018-03-05T00:00:00\u002b00:00",
  "dateModified": "2018-03-05T00:00:00\u002b00:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "SmallFire",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/coldinfire.github.io\/logo.png",
      "width":  127 ,
      "height":  40 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Small Fire"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="https://coldinfire.github.io">Small Fire`s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/books/" title="">Books</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
                <a href="/search/" class="search"><i class="iconfont icon-t"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="https://coldinfire.github.io">Small Fire`s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/books/" title="">Books</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title"> Redis 基本使用 </h1>
        <div class="post-meta">
            Written by <a href="https://coldinfire.github.io" rel="author">Small Fire</a> with ♥ 
                <span class="post-time">
                    on <time datetime=2018-03-05 >5 March 2018</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://coldinfire.github.io/categories/JAVA/"> JAVA </a>
                        
                </span>
                <i class="iconfont icon-timer"></i>
                3 min
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <h3 id="redis-简介">Redis 简介</h3>
<p>redis 时一款高性能的非关系型数据库(NOSQL)，包含多种数据结构、支持网络、可选持久性的键值对存储数据库。</p>
<ul>
<li>数据的存储格式是key,value形式，且数据之间没有关联关系</li>
<li>数据存储在内存中，性能高效</li>
<li>支持分布式，理论上可以无限扩展</li>
<li>单线程请求处理、I/O多路复用技术</li>
</ul>
<p>关系型数据库和 NoSQL 数据库是互补的关系。一般将数据存储在关系型数据库中，在 nosql 数据库中备份存储关系型数据库的数据。</p>
<h3 id="redis-命令操作">Redis 命令操作</h3>
<h4 id="redis-数据结构">Redis 数据结构</h4>
<p>redis 存储的是 key,value 形式的数据，key 都是字符串，value 有5中不同的数据结构。</p>
<p>字符串类型：string；可以存储字符串、图片等多种类型，最大长度支持 512 M。</p>
<ul>
<li>GET key/MGET key1 [key2 &hellip;]：获取单个/多个字符元素</li>
<li>SET/MSET/SETEX/MSETNX：存储单个/多个值/设置指定过期时间的键值对</li>
<li>DEL key1 [key2 &hellip;]：删除指定 key</li>
<li>INCR/DECR</li>
<li>GETSET</li>
</ul>
<p>哈希类型：hash；map 格式，key 和 value 都是字符串类型</p>
<ul>
<li>HGET/HMGET/HGETALL：获取一个/多个/所有字段的值</li>
<li>HSET/HMSET/HSETNX：赋值一个/多个字段/键不存在时设置值</li>
<li>HDEL：删除字段</li>
<li>HKEYS/HVALS：获取所有字段名/字段值</li>
<li>HEXISTS/HLEN</li>
</ul>
<p>列表类型：list；底层基于 linkedList 实现，是一个插入顺序排序的字符串元素集合。</p>
<ul>
<li>LPUSH/LPUSHX/RPUSH/RPUSHX/LINSERT/LSET</li>
<li>LPOP/RPOP：删除列表中最左/右边的数据，并将元素返回</li>
<li>LINDEX/RINDEX/LRANGE/RANGE：获取列表在：给定位置的单个元素/给定范围内的所有值</li>
<li>LLEN/LTRIM</li>
</ul>
<p>集合类型：Set；集合中的元素没有顺序, 且元素是唯一的。Set 类型的底层是通过哈希表实现的。</p>
<ul>
<li>SADD：向集合中添加元素</li>
<li>SMEMBERS：获取 set 集合中所有的键</li>
<li>SREM/SPOP/SMOVE：删除 set 集合中给定的键</li>
<li>SCARD：获取 set 集合长度</li>
<li>SISMEMBER：潘顿键是否在集合中</li>
<li>SINTER/SDIFF/SDIFFSTORE/SUNION</li>
</ul>
<p>有序集合类型：sorted set；每个元素都会关联一个 double 类型的分数权值，通过这个权值来为集合中的成员进行从小到大的排序。与 Set 类型一样，其底层也是通过哈希表实现的。</p>
<ul>
<li>ZADD</li>
<li>ZRANGE：获取指定范围内的所有值</li>
<li>ZREM/ZPOP/ZMOVE</li>
<li>ZCARD/ZCOUNT</li>
<li>ZINTER/ZDIFF/ZDIFFSTORE/ZUNION</li>
</ul>
<h4 id="通用命令">通用命令</h4>
<p><code>keys *</code> ：查询所有的键</p>
<p><code>type key</code>：获取键对应的 value 的类型</p>
<p><code>del key</code>： 删除指定的 key:value</p>
<p><code>exists key [key ...]</code>：判断是否存在指定的 key</p>
<p><code>expire kery second</code>：设置 key 的过期时间</p>
<h3 id="redis-持久化">Redis 持久化</h3>
<p>将 redis 内存中的数据持久化保存到磁盘中。</p>
<h4 id="rdb默认方式">RDB(默认方式)</h4>
<p>默认使用的机制：快照持久化，在一定的时间间隔中，检查 key 的变化情况，然后持久化数据。</p>
<p>Step1：在文件 redis.windows.conf 中配置保存时间</p>
<p><img src="/images/WEB/Redis1.png" alt="RDB 持久化设置"></p>
<p>Step2：重启 redis 服务器，并指定配置文件名称</p>
<ul>
<li>redis-server.exe redis.windows.conf</li>
</ul>
<h4 id="aof-append-only-file">AOF (Append only file)</h4>
<p>日志记录的方式，可以记录每一条命令的操作。在每一次操作后都进行数据持久化。</p>
<p>Step1：编辑 redis.windows.conf 文件：<code>appendonly no</code> 关闭 aof；<code>appendonly yes</code> 开启 aof。</p>
<p><img src="/images/WEB/Redis2.png" alt="AOF 持久化设置"></p>
<p>Step2：设置持久化的方式</p>
<ul>
<li><code>appendfsync no</code> ：不进行持久化</li>
<li><code>appendfsync always</code> ：每一次操作都进行持久化</li>
<li><code>appendfsync everysec</code>：每隔一秒进行一次持久化</li>
</ul>
<h3 id="java-操作-redis">JAVA 操作 Redis</h3>
<h4 id="下载-jar-包">下载 jar 包</h4>
<p>将准备好的 jar 包添加到项目中。</p>
<ul>
<li>commons-pool2-x.x.jar</li>
<li>jedis-x.x.x.jar</li>
</ul>
<h4 id="程序使用">程序使用</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> redis.clients.jedis.Jedis<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> redis.clients.jedis.JedisPool<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> redis.clients.jedis.JedisPoolConfig<span style="color:#f92672">;</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RedisTest</span> <span style="color:#f92672">{</span>
  <span style="color:#75715e">// 直接获取并使用
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">@Test</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test1</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 获取核心对象：jedis(host,port)
</span><span style="color:#75715e"></span>    Jedis jedis <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Jedis<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;127.0.0.1&#34;</span><span style="color:#f92672">,</span> 6379<span style="color:#f92672">);</span>
    jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">set</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;test&#34;</span><span style="color:#f92672">);</span>
    String value <span style="color:#f92672">=</span> jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>value<span style="color:#f92672">);</span>
    jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
  <span style="color:#f92672">}</span>
  <span style="color:#75715e">// 通过连接池获取并使用
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">@Test</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test2</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 获取连接池配置对象
</span><span style="color:#75715e"></span>    JedisPoolConfig config <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> JedisPoolConfig<span style="color:#f92672">();</span>
    <span style="color:#75715e">// 设置最大连接数
</span><span style="color:#75715e"></span>    config<span style="color:#f92672">.</span><span style="color:#a6e22e">setMaxTotal</span><span style="color:#f92672">(</span>30<span style="color:#f92672">);</span>
    <span style="color:#75715e">// 设置最大的空闲连接
</span><span style="color:#75715e"></span>    config<span style="color:#f92672">.</span><span style="color:#a6e22e">setMaxIdle</span><span style="color:#f92672">(</span>10<span style="color:#f92672">);</span>
    <span style="color:#75715e">// 获取连接池
</span><span style="color:#75715e"></span>    JedisPool jedisPool <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> JedisPool<span style="color:#f92672">(</span>config<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;127.0.0.1&#34;</span><span style="color:#f92672">,</span>6379<span style="color:#f92672">);</span>
    <span style="color:#75715e">// 获取核心对象：jedis
</span><span style="color:#75715e"></span>    Jedis jedis <span style="color:#f92672">=</span> jedisPool<span style="color:#f92672">.</span><span style="color:#a6e22e">getResource</span><span style="color:#f92672">();</span>
    jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">set</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;jedis&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;testJedis&#34;</span><span style="color:#f92672">);</span>
    String value <span style="color:#f92672">=</span> jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;jedis&#34;</span><span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>value<span style="color:#f92672">);</span>
    jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
    jedisPool<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Small Fire </span>
                </p>
            
           
            <p class="copyright-item">
                    <span>Words:</span>
                   <span>1360</span>
            </p>
            
            <p class="copyright-item">
                
            </p>

            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-icon-tag"></i>Tag: 
            
            <span class="tag"><a href="https://coldinfire.github.io/tags/Redis/">
                    #Redis</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">Back</a></span> · 
                <span><a href="https://coldinfire.github.io">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://coldinfire.github.io/2018/Utils_hugo1/" class="prev" rel="prev" title=" 使用Hugo&#43;GitHub Pages快速搭建博客  "><i class="iconfont icon-dajiantou"></i>&nbsp; 使用Hugo&#43;GitHub Pages快速搭建博客  </a>
         
        
        <a href="https://coldinfire.github.io/2018/Utils_hugo2/" class="next" rel="next" title=" Hugo添加搜索功能(Algolia)  "> Hugo添加搜索功能(Algolia)  &nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
          
          <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2018-03-05 00:00:00 \u002b0000 UTC',
        title: ' Redis 基本使用 ',
        clientID: 'd2cccd8844ae11b05792',
        clientSecret: 'cea63bc294ee16cb47a3344b693c350da1bb0753',
        repo: 'coldinfire.github.io',
        owner: 'coldinfire',
        admin: ['coldinfire'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>
  


          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2021</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="https://coldinfire.github.io">Small Fire</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.12/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  







     </div>
  </body>
</html>
