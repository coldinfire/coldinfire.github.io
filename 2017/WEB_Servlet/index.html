<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="https://coldinfire.github.io/2017/WEB_Tomcat/" />
  <link rel="next" href="https://coldinfire.github.io/2017/WEB_Servlet_Request/" />
  <link rel="canonical" href="https://coldinfire.github.io/2017/WEB_Servlet/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Servlet 解析 | Small Fire`s Blog
       
  </title>
  <meta name="title" content="Servlet 解析 | Small Fire`s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Servlet 解析"/>
<meta name="twitter:description" content="Servlet 简介 Servlet是Java Web的一种实现技术，可以接收浏览器发送过来的请求并给出响应。 Servlet 的创建 Method 1 : 实现 Servlet 接口 Step1：创建类并实现"/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Servlet 解析",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/coldinfire.github.io\/2017\/WEB_Servlet\/"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https:\/\/coldinfire.github.io\/cover.png",
    "width":  800 ,
    "height":  600 
  },
  "genre": "posts",
  "keywords": "Servlet",
  "wordcount":  1849 ,
  "url": "https:\/\/coldinfire.github.io\/2017\/WEB_Servlet\/",
  "datePublished": "2017-11-04T00:00:00\u002b00:00",
  "dateModified": "2017-11-04T00:00:00\u002b00:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "SmallFire",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/coldinfire.github.io\/logo.png",
      "width":  127 ,
      "height":  40 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Small Fire"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="https://coldinfire.github.io">Small Fire`s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/books/" title="">Books</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
                <a href="/search/" class="search"><i class="iconfont icon-t"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="https://coldinfire.github.io">Small Fire`s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/books/" title="">Books</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">Servlet 解析</h1>
        <div class="post-meta">
            Written by <a href="https://coldinfire.github.io" rel="author">Small Fire</a> with ♥ 
                <span class="post-time">
                    on <time datetime=2017-11-04 >4 November 2017</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://coldinfire.github.io/categories/JAVA/"> JAVA </a>
                        
                </span>
                <i class="iconfont icon-timer"></i>
                4 min
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <h3 id="servlet-简介">Servlet 简介</h3>
<p>Servlet是Java Web的一种实现技术，可以接收浏览器发送过来的请求并给出响应。</p>
<h3 id="servlet-的创建">Servlet 的创建</h3>
<h4 id="method-1--实现-servlet-接口">Method 1 : 实现 Servlet 接口</h4>
<p>Step1：创建类并实现 Servlet 接口</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestServlet</span> <span style="color:#66d9ef">implements</span> Servlet <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> ServletConfig <span style="color:#a6e22e">getServletConfig</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getServletInfo</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>ServletRequest req<span style="color:#f92672">,</span> ServletResponse res<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ServletException<span style="color:#f92672">,</span> IOException <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;service()方法被执行……&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">init</span><span style="color:#f92672">(</span>ServletConfig config<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ServletException <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;init()方法被执行……&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroy</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;destroy()方法被执行……&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Step2：配置 web.xml 文件</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-XML" data-lang="XML"><span style="color:#f92672">&lt;servlet&gt;</span>
  <span style="color:#f92672">&lt;servlet-name&gt;</span>demo1<span style="color:#f92672">&lt;/servlet-name&gt;</span>
  <span style="color:#f92672">&lt;servlet-class&gt;</span>Servlet.TestServlet<span style="color:#f92672">&lt;/servlet-class&gt;</span>
  <span style="color:#f92672">&lt;load-on-startup&gt;</span>3<span style="color:#f92672">&lt;/load-on-startup&gt;</span>
<span style="color:#f92672">&lt;/servlet&gt;</span>
<span style="color:#f92672">&lt;servlet-mapping&gt;</span>
  <span style="color:#f92672">&lt;servlet-name&gt;</span>demo1<span style="color:#f92672">&lt;/servlet-name&gt;</span>
  <span style="color:#f92672">&lt;url-pattern&gt;</span>/demo1<span style="color:#f92672">&lt;/url-pattern&gt;</span>
<span style="color:#f92672">&lt;/servlet-mapping&gt;</span>
</code></pre></div><h4 id="method-2继承-httpservlet-抽象类">Method 2：继承 HttpServlet 抽象类</h4>
<p>HttpServlet 是能够处理 HTTP 请求的 servlet，它在原有 Servlet 接口上添加了一些与 HTTP 协议处理方法。它比 Servlet 接口的功能更为强大。</p>
<p>由于开发的项目一般遵循 HTTP 协议，所以经常使用的是继承 HttpServlet类，而避免直接去实现 Servlet 接口。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@WebServlet</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/demo2&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloServlet</span> <span style="color:#66d9ef">extends</span> HttpServlet <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">long</span> serialVersionUID <span style="color:#f92672">=</span> 1L<span style="color:#f92672">;</span>
  <span style="color:#75715e">/**
</span><span style="color:#75715e">  * @see HttpServlet#HttpServlet()
</span><span style="color:#75715e">  */</span>
  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">HelloServlet</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">super</span><span style="color:#f92672">();</span>
    <span style="color:#75715e">// TODO Auto-generated constructor stub
</span><span style="color:#75715e"></span>  <span style="color:#f92672">}</span>
  <span style="color:#75715e">/**
</span><span style="color:#75715e">  * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
</span><span style="color:#75715e">  */</span>
  <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doGet</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ServletException<span style="color:#f92672">,</span> IOException <span style="color:#f92672">{</span>
    <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 使用 GBK 设置中文正常显示
</span><span style="color:#75715e"></span>    response<span style="color:#f92672">.</span><span style="color:#a6e22e">setCharacterEncoding</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;GBK&#34;</span><span style="color:#f92672">);</span>
    response<span style="color:#f92672">.</span><span style="color:#a6e22e">getWriter</span><span style="color:#f92672">().</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Served at: &#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>request<span style="color:#f92672">.</span><span style="color:#a6e22e">getContextPath</span><span style="color:#f92672">());</span>
    response<span style="color:#f92672">.</span><span style="color:#a6e22e">getWriter</span><span style="color:#f92672">().</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Test Servlet&#34;</span><span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
  <span style="color:#75715e">/**
</span><span style="color:#75715e">  * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
</span><span style="color:#75715e">  */</span>
  <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doPost</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ServletException<span style="color:#f92672">,</span> IOException <span style="color:#f92672">{</span>
    <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>    doGet<span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> response<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="通过注解的方式配置-servlet-访问资源路径">通过注解的方式配置 Servlet 访问资源路径</h4>
<p><code>@WebServlet(urlpartten)</code></p>
<p>一个Servlet 可以定义多个访问路径： @Webservlet({&quot;/a&quot;,&quot;/b&quot;})</p>
<p>路径定义规则</p>
<ul>
<li>/xxx：单层路径</li>
<li>/xxx/xxx：多层路径，目录结构</li>
<li>*.do</li>
</ul>
<h3 id="servlet-的运行过程">Servlet 的运行过程</h3>
<p><img src="/images/Tomcat/tomcat_parse.png" alt=""></p>
<p>第一步：客户端向Web服务器(Tomcat)发出 HTTP 请求，服务器接收到请求后转给容器。</p>
<p>第二步：容器根据请求 URL 及 web.xml 里面的配置（或者通过注解）判断对应的Servlet是否存在，如果不存在则返回404，存在则执行第三步。</p>
<p>第三步：容器根据请求 URL 及 web.xml 里面的配置（或者通过注解）判断对应的 Servlet 是否已经被实例化。若是相应的 Servlet 没有被实例化，则容器将会加载相应的 Servlet 到 Java 虚拟机并实例化。</p>
<p>第四步：创建一个用于封装 HTTP 请求消息的 HttpServletRequest 对象和一个代表 HTTP 响应消息的 HttpServletResponse 对象，然后调用实例对象的 service() 方法并将请求和响应对象作为参数传递进去，然后开启一个新的线程去执行相关处理。</p>
<p>第五步：service() 方法执行完后，会执行Servlet中的destroy()，销毁线程或被放在线程池中。</p>
<h3 id="servlet-生命周期">Servlet 生命周期</h3>
<p>Servlet 在容器中经历如下几个过程：</p>
<p>第一步：http 请求到达服务器，容器先加载 Servlet 类</p>
<p>第二步：容器实例化 Servlet (Servlet无参构造函数执行)</p>
<p>第三步：执行 Servlet 中的 init() 方法（在 Servlet 生命周期中，只执行一次，且在 service() 方法执行前执行），Servlet 实例化</p>
<p>第四步：执行 Servlet 中的 service() 方法（每一次 Servlet 被访问时执行），处理客户请求；doPost() 或 doGet()</p>
<p>第五步：服务器正常关闭时，执行 Servlet 中的 destroy()，销毁线程</p>
<h4 id="init-方法">init() 方法</h4>
<p>对 Servlet 实例化，可以在配置文件中指定其创建时机。</p>
<ul>
<li>第一次被访问时，创建；<code>load-on-startup</code>值为负数，默认为 -1</li>
<li>在服务器启动时，创建；<code>load-on-startup</code>值为0或正整数</li>
</ul>
<h3 id="servlet-api-解析">Servlet API 解析</h3>
<p><img src="/images/Tomcat/Servlet_Interface.png" alt=""></p>
<h4 id="servlet接口">Servlet接口</h4>
<p>在 Servlet 接口中定义了5个方法，其中3个方法都是由 Servlet 容器来调用的，容器会在 Servlet 的生命周期的不同阶段调用特定的方法。</p>
<h4 id="genericservlet-抽象类">GenericServlet 抽象类</h4>
<p>GenericServlet 抽象类为 Servlet 接口提供了通用实现，它与任何网络应用层协议无关。</p>
<h4 id="servletrequest-接口">ServletRequest 接口</h4>
<p>ServletRequest 表示来自客户端的请求；当 Servlet 容器接收到客户端要求访问特定 Servlet 的请求时，容器先解析客户端的原始请求数据，把它包装成一个 ServletRequest 对象。</p>
<h4 id="servletresponse-接口">ServletResponse 接口</h4>
<p>ServletResponse 对象封装了响应数据，可以获取到响应信息。</p>
<h4 id="httpservletrequest-接口">HttpServletRequest 接口</h4>
<p>HttpServletRequest 接口扩展于 javax.servlet.ServletRequest接口，当客户端通过 HTTP 协议访问时，HttpServletRequest 对象封装了来自客户端的 HTTP 请求，该对象提供了用于读取 HTTP 请求中的相关信息的方法。</p>
<h4 id="httpservletresponse-接口">HttpServletResponse 接口</h4>
<p>HttpServletResponse 接口扩展于 javax.servlet.servletResponse接口，HttpServletResponse 对象封装了来自服务端的 HTTP 响应。HttpServletResponse 接口提供了与 HTTP 协议相关的一些方法，Servlet 可通过这些方法来设置 HTTP 响应头或向客户端写 Cookie。</p>
<h4 id="httpservlet-抽象类">HttpServlet 抽象类</h4>
<p>HttpServlet 抽象类是继承于 GenericServlet 抽象类而来的。使用HttpServlet 抽象类时，还需要借助请求对象 HttpServletRequest 和响应对象 HttpServletResponse。</p>
<p>HttpServlet 抽象类覆盖了 GenericServlet 抽象类中的 Service( )方法，并且添加了一个自己独有的 Service(HttpServletRequest req，HttpServletResponse resp)方法。</p>
<p>在 HttpServlet 的 service(HttpServletRequest req, HttpServletResponse resp) 方法会去判断当前请求是 GET 还是 POST，如果是 GET 请求，那么会去调用本类的 doGet() 方法，如果是 POST 请求会去调用doPost() 方法，这说明在子类中去重写doGet()或doPost()方法即可。</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Small Fire </span>
                </p>
            
           
            <p class="copyright-item">
                    <span>Words:</span>
                   <span>1849</span>
            </p>
            
            <p class="copyright-item">
                
            </p>

            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-icon-tag"></i>Tag: 
            
            <span class="tag"><a href="https://coldinfire.github.io/tags/Servlet/">
                    #Servlet</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">Back</a></span> · 
                <span><a href="https://coldinfire.github.io">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://coldinfire.github.io/2017/WEB_Tomcat/" class="prev" rel="prev" title="Tomcat 使用"><i class="iconfont icon-dajiantou"></i>&nbsp;Tomcat 使用</a>
         
        
        <a href="https://coldinfire.github.io/2017/WEB_Servlet_Request/" class="next" rel="next" title="Servlet Request对象">Servlet Request对象&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
          
          <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2017-11-04 00:00:00 \u002b0000 UTC',
        title: 'Servlet 解析',
        clientID: 'd2cccd8844ae11b05792',
        clientSecret: 'cea63bc294ee16cb47a3344b693c350da1bb0753',
        repo: 'coldinfire.github.io',
        owner: 'coldinfire',
        admin: ['coldinfire'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>
  


          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2021</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="https://coldinfire.github.io">Small Fire</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.12/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  







     </div>
  </body>
</html>
